<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiniPaper Tool - Documentation</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            padding: 20px 0;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px 40px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 4px;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 600;
        }
        h4 {
            color: #34495e;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 20px;
            font-weight: 600;
        }
        h5 {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 12px;
            font-size: 18px;
            font-weight: 600;
        }
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        ul {
            margin-bottom: 20px;
            padding-left: 25px;
        }
        li {
            margin-bottom: 8px;
        }
        strong {
            color: #2c3e50;
            font-weight: 600;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "Courier New", monospace;
            font-size: 0.9em;
            color: #c7254e;
        }
        .container ul ul {
            margin-top: 10px;
            margin-bottom: 15px;
        }
        .container ul ul li {
            margin-bottom: 5px;
        }
        .toc {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 20px;
            margin: 30px 0;
        }
        .toc h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 20px;
        }
        .toc ul {
            margin-bottom: 0;
        }
        .toc li {
            margin-bottom: 8px;
        }
        .toc a {
            color: #337ab7;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .quick-start {
            background-color: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 30px 0;
        }
        .quick-start h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        h4[id], h5[id] {
            scroll-margin-top: 80px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>AI MiniPaper Tool - Instructor Guide</h2>
        
        <p>The AI MiniPaper Tool is designed to collect and grade short papers written with AI assistance. Students submit papers using CKEditor 5.0, with feedback provided through comment streams. The tool supports instructor grading, peer review comments, flagging for moderation, and comprehensive student analytics.</p>

        <!-- Quick Start Section -->
        <div class="quick-start">
            <h3>ðŸš€ Quick Start</h3>
            <p><strong>New to the tool? Follow these steps:</strong></p>
            <ol>
                <li><strong>Enter Instructions:</strong> Click the "Instructions" tab and write your assignment instructions</li>
                <li><strong>Configure Settings:</strong> Click the "Settings" tab and either:
                    <ul>
                        <li>Select an <strong>Assignment Type</strong> preset from the dropdown (recommended for first-time users)</li>
                        <li>Or manually configure points and options</li>
                    </ul>
                </li>
                <li><strong>Save:</strong> Click "Save All Settings" to save your configuration</li>
                <li><strong>Optional:</strong> Configure AI feedback in the "AI Prompt" tab if you want automated comments</li>
            </ol>
            <p><strong>Tip:</strong> Use the assignment type presets to get started quickly. You can always modify the values before saving.</p>
        </div>

        <!-- Table of Contents -->
        <div class="toc">
            <h3>ðŸ“‘ Table of Contents</h3>
            <ul>
                <li><a href="#settings">Settings Configuration</a></li>
                <li><a href="#instructions">Instructions / Rubric</a></li>
                <li><a href="#ai-prompt">AI Prompt Configuration</a></li>
                <li><a href="#student-workflow">Student Workflow</a></li>
                <li><a href="#peer-review">Peer Review System</a></li>
                <li><a href="#grading">Grading and Points</a></li>
                <li><a href="#instructor-features">Instructor Features</a></li>
                <li><a href="#generated-names">Generated Name Search</a></li>
                <li><a href="#test-data">Test Data</a></li>
            </ul>
        </div>

<h4 id="settings">Settings</h4>
<p><strong>Tip:</strong> Use the "Assignment Type" dropdown in the Settings tab to quickly configure common assignment types. The tool provides presets for Peer Review Focused, Instructor Graded, Completion-Based, Hybrid, Anonymous, and Scaffolded assignments. You can select a preset and then modify the values as needed.</p>
<p><strong>General Tips:</strong></p>
<ul>
    <li><strong>Total points:</strong> Keep overall points reasonable (50-100 total is common). Remember: Overall points = instructor_points + submit_points + (comment_points Ã— min_comments)</li>
    <li><strong>Minimum comments:</strong> Set based on class size. For classes of 20+, requiring 3-5 comments ensures everyone gets feedback. For smaller classes, 2-3 may suffice. <strong>Important:</strong> If minimum comments is 0, set points per comment to 0 as well, since comment points won't contribute to overall points when min_comments = 0.</li>
    <li><strong>Flagging system:</strong> Use flagging to identify problematic content early. Anyone can flag, but only instructors can unflag, providing a moderation safety net.</li>
    <li><strong>Generated names:</strong> When enabled, instructors can still see real names (with generated names in parentheses), maintaining accountability while providing student privacy.</li>
    <li><strong>Reset feature:</strong> Enable reset if you want students to revise based on feedback. Disable for final submissions or when you want to preserve the original submission.</li>
</ul>
<p>Configure the assignment settings including:</p>
<ul>
    <li><strong>Submit points:</strong> Points students earn for submitting their paper (can be zero)</li>
    <li><strong>Instructor grade points:</strong> Points you will award for the assignment (can be zero)</li>
    <li><strong>Points earned for each comment:</strong> Points students earn per comment on other submissions (can be zero)</li>
    <li><strong>Minimum number of comments per student:</strong> Required comments each student must make (can be zero). If zero, students can comment on any submission.</li>
    <li><strong>Use actual student names:</strong> When checked, display real names. When unchecked, students see generated names (e.g., "Purple Elephant") and instructors see real names with generated names in parentheses (e.g., "John Doe (Purple Elephant)")</li>
    <li><strong>Allow students to see and comment on all submissions after the minimum has been met:</strong> When checked, students who have met the minimum comment requirement can see and comment on all submissions. When unchecked, they can only see submissions they have already commented on.</li>
    <li><strong>Allow students to reset and resubmit their papers:</strong> Enables the Reset Submission feature. When a student resets, their submission becomes editable again and comments are soft-deleted (hidden from students but visible to instructors).</li>
    <li><strong>AI API URL:</strong> Optional endpoint URL for generating AI comments. Leave empty to use the built-in test endpoint. For OpenAI, use: <code>https://api.openai.com/v1/chat/completions</code></li>
    <li><strong>AI API Key:</strong> Optional authentication key for the AI API. Required if using an external AI service like OpenAI.</li>
    <li><strong>Auto Grade Timeout:</strong> Automatically send a grade of 1.0 (100%) after this time has elapsed since submission if overall_points > 0. This ensures students get full credit even if they cannot complete enough reviews due to insufficient submissions. Set using days and hours dropdowns (e.g., 2 days = 48 hours). Typically left at 0 days and 0 hours.</li>
    <li><strong>Due date:</strong> Optional due date for the assignment</li>
</ul>

<h4 id="instructions">Instructions / Rubric</h4>
<p>Edit the assignment instructions and rubric that students will see. Use the rich text editor to format your content. This is displayed to students in the Instructions section.</p>

<h4 id="ai-prompt">AI Prompt</h4>
<p>When AI is configured (AI API URL is set or using test endpoint), instructors can edit a custom AI prompt that controls how AI-generated comments are created. The AI Prompt editor appears as a separate tab in the instructor interface.</p>
<ul>
    <li><strong>Default prompt:</strong> If left unchanged, a default prompt is used that asks the AI to provide brief, actionable feedback focusing on strengths, areas for improvement, and specific suggestions.</li>
    <li><strong>Placeholder support:</strong> Use <code>-- Instructions Included Here --</code> as a placeholder in your AI prompt. This will be automatically replaced with the actual assignment instructions when generating AI comments.</li>
    <li><strong>Customization:</strong> Customize the AI prompt to match your pedagogical goals, tone, or specific feedback requirements. The prompt is sent to the AI service along with the student's paper text.</li>
    <li><strong>AI comments:</strong> AI-generated comments appear in the comment stream alongside instructor and peer comments, marked as "AI" comments.</li>
</ul>
<p><strong>Note:</strong> The AI Prompt tab only appears when AI is configured. If no AI API URL is set and you're not using the test endpoint (key '12345'), the AI Prompt tab will not be visible.</p>

<h4 id="student-workflow">Student Workflow</h4>
<p>Students can:</p>
<ul>
    <li>Write and edit their paper using CKEditor 5.0</li>
    <li>Save drafts without submitting</li>
    <li>Submit their paper (which locks it from editing unless reset is enabled)</li>
    <li>View their submitted paper and AI-enhanced version (if available)</li>
    <li>See comments from instructors, other students, and AI (if AI is configured)</li>
    <li>Review other students' submissions and add comments</li>
    <li>View their points and review count on the main page</li>
</ul>
<p><strong>AI Comments:</strong> When AI is configured and a student submits their paper, an AI-generated comment is automatically created based on the AI prompt and assignment instructions. This comment appears immediately after submission and provides automated feedback to help students improve their work.</p>

<h4 id="peer-review">Peer Review System</h4>
<p>The review system prioritizes submissions to help students meet the minimum comment requirement:</p>
<ul>
    <li>Submissions the student has already commented on appear first</li>
    <li>Then submissions that need more comments (oldest submissions with fewest comments)</li>
    <li>If minimum comments is set and not met, students see submissions that help them reach the minimum</li>
    <li>After meeting the minimum, visibility depends on the "Allow students to see all submissions" setting</li>
    <li>Review list is paginated (10 submissions per page)</li>
</ul>

<h4 id="grading">Grading</h4>
<p><strong>Point Calculation:</strong></p>
<p>Overall points = instructor_points + submit_points + (comment_points Ã— min_comments)</p>
<p>Earned points include:</p>
<ul>
    <li>Submit points (if paper is submitted)</li>
    <li>Comment points (capped at min_comments - no extra points for exceeding minimum)</li>
    <li>Instructor points (assigned by instructor, 0 to instructor_points)</li>
</ul>
<p>Grades are automatically sent to the LMS whenever:</p>
<ul>
    <li>A student views their main page (if overall_points > 0)</li>
    <li>A student submits a comment</li>
    <li>An instructor assigns or updates instructor points</li>
    <li>The auto instructor grade timeout expires (if configured)</li>
</ul>
<p>Grades will only be sent if overall_points > 0.</p>
<p><strong>Auto Grade Timeout:</strong> If this setting is configured (non-zero) and overall_points > 0, students who have submitted their papers will automatically receive a grade of 1.0 (100%) after the specified timeout period has elapsed since submission. This ensures students get full credit even if they cannot complete enough peer reviews due to insufficient submissions available for review. The grade is sent directly to the LMS without modifying instructor points in the database, and applies regardless of whether the instructor has manually graded.</p>

<h4 id="instructor-features">Instructor Features</h4>
<ul>
    <li><strong>Student Data:</strong> View all student submissions, grades, and analytics from the Student Data menu with:
        <ul>
            <li>Pagination (20 students per page)</li>
            <li>Sortable columns (Name, Email, Grade, Updated, Comments Given, Comments Received, Flags, Deleted Comments)</li>
            <li>Search by name or email</li>
            <li>Search by generated name (when "Use actual student names" is unchecked)</li>
            <li>Default sort by Flags (DESC), then Name (ASC)</li>
            <li>Flag counts include both flagged comments and flagged submissions</li>
        </ul>
    </li>
    <li><strong>Grade Detail:</strong> View individual student details including:
        <ul>
            <li>Points earned / points possible</li>
            <li>Review count (number of students reviewed)</li>
            <li>Flag information (flagged comments count and submission flag status, if any)</li>
            <li>Assign instructor points (integer from 0 to instructor_points)</li>
            <li>Review Submission button (preserves pagination/sort/search state)</li>
            <li>Reset Submission button</li>
        </ul>
    </li>
    <li><strong>Review Submission:</strong> Click "Review Submission" from grade detail to view and comment on a student's paper. Navigation context (page, sort, search) is preserved when navigating back.</li>
    <li><strong>Comment Moderation:</strong> Hide/show individual comments using the trash can icon. Hidden comments are soft-deleted (visible to instructors, hidden from students, still count for points).</li>
    <li><strong>Flagging:</strong> Flag comments or submissions for review. Anyone can flag; only instructors can unflag. Flagged items are indicated with red flag icons.</li>
    <li><strong>Comments:</strong> All instructor comments are marked as "Staff" and visible to students</li>
    <li><strong>Soft-Deleted Comments:</strong> When a submission is reset or a comment is hidden, comments are soft-deleted (visible to instructors with indication, hidden from students, still count for points)</li>
</ul>

<h4 id="generated-names">Generated Name Search</h4>
<p>When "Use actual student names" is unchecked, students see generated names (e.g., "Purple Elephant") instead of their real names. Instructors can search for students by their generated name using the "Search by Generated Name" field in the Student Data page. This is useful when you only know a student's generated name.</p>
<p>Generated name search results appear in the main Student Data table with sorting disabled. The search is mutually exclusive with regular name/email search - entering one clears the other.</p>

<h4 id="test-data">Test Data</h4>
<p>If your LTI key is '12345', you can access a test data generator from the Instructor menu to create 100 dummy users with submitted papers for testing the review system.</p>

    </div>
</body>
</html>